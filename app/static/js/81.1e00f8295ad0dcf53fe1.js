webpackJsonp([81],{Phds:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={name:"search",components:{Header:e("FCAx").a},data:function(){return{title:"搜索",isSearchEnd:!1,activeIndex:null,activeLink:null,actBtn:[{link:"景点",to:"scenic",check:!1},{link:"游玩",to:"sharePlay",check:!1},{link:"住宿",to:"shareInn",check:!1},{link:"美食",to:"shareFood",check:!1},{link:"农房",to:"rentList",check:!1},{link:"成交",to:"dealList",check:!1},{link:"求租",to:"wantedList",check:!1},{link:"资讯",to:"infoList",check:!1}],history:[],map:"搜索",searchData:{value:""},searchValue:"",value:"",searchEnd:!1}},methods:{search:function(t){var a=this;this.searchValue=t,window.localStorage.getItem("searchHistory")&&(this.history=JSON.parse(window.localStorage.getItem("searchHistory")).reverse()),this.activeLink||this.$route.query.name?this.cellClick(this.activeLink,t):""==t?this.searchEnd=!1:(this.searchData.value=t,this.$http.post("appServiceInformation/search",{cityId:1,info:t}).then(function(t){"success"==t.msg?a.searchEnd=t.data:a.$toast(t.info)}));var e=[],s=t;if(window.localStorage.getItem("searchHistory")){e=JSON.parse(window.localStorage.getItem("searchHistory"));for(var c=0;c<e.length;c++)e[c]==s&&e.splice(c,1);s&&""!=s&&e.push(s),e.length>=10&&e.splice(0,1)}else s&&""!=s&&e.push(s);window.localStorage.setItem("searchHistory",JSON.stringify(e))},checkBth:function(t,a){if(this.activeIndex==t)return this.activeIndex=null,this.activeLink=null,!1;this.activeIndex=t,this.activeLink=a,this.searchValue&&""!==this.searchValue&&this.cellClick(this.activeLink,this.searchValue)},cellClick:function(t,a){this.$router.push({name:t,query:{searchWord:a}})},onCancel:function(){console.log(111)}},computed:{},created:function(){window.localStorage.getItem("searchHistory")&&(this.history=JSON.parse(window.localStorage.getItem("searchHistory")).reverse()),console.log(this.$route.query),this.$route.query&&this.$route.query.name&&(this.title=this.$route.query.name+"-搜索",this.activeLink=this.$route.query.to)},mounted:function(){}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container",attrs:{id:"search"}},[e("div",{staticClass:"topBar"},[e("Header",{attrs:{title:t.title}})],1),t._v(" "),e("div",{staticStyle:{width:"100%",height:".92rem"}}),t._v(" "),e("div",{staticClass:"search"},[e("van-search",{attrs:{placeholder:"请输入区域/关键字"},on:{clear:t.onCancel},model:{value:t.searchValue,callback:function(a){t.searchValue=a},expression:"searchValue"}}),t._v(" "),e("div",{staticClass:"btn",on:{click:function(a){t.search(t.searchValue)}}},[t._v("搜索")])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.searchEnd,expression:"!searchEnd"}],staticClass:"contain-in"},["搜索"===t.title?e("p",{staticClass:"titin"},[t._v("指定搜索内容")]):t._e(),t._v(" "),"搜索"===t.title?e("div",t._l(t.actBtn,function(a,s){return e("div",{class:s==t.activeIndex?"act-button btn":"act-button",on:{click:function(e){t.checkBth(s,a.to)}}},[t._v("\r\n              "+t._s(a.link)+"\r\n            ")])})):t._e(),t._v(" "),e("p",{staticClass:"titin"},[t._v("搜索历史")]),t._v(" "),e("div",{staticClass:"hisotory-box"},t._l(t.history,function(a){return e("div",{staticClass:"act-button",on:{click:function(e){t.search(a)}}},[t._v("\r\n              "+t._s(a)+"\r\n          ")])}))]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.searchEnd,expression:"searchEnd"}],staticClass:"contain-in",staticStyle:{padding:"0"}},[e("van-cell-group",[e("van-cell",{staticClass:"search-item",on:{click:function(a){t.cellClick("scenic",t.searchData.value)}}},[e("template",{slot:"title"},[e("span",{staticClass:"van-cell-text"},[t._v(t._s(t.searchData.value))]),t._v(" "),e("span",[t._v("景点")]),t._v(" "),e("span",[t._v(t._s(t.searchEnd.landspace))])])],2),t._v(" "),e("van-cell",{staticClass:"search-item",on:{click:function(a){t.cellClick("sharePlay",t.searchData.value)}}},[e("template",{slot:"title"},[e("span",{staticClass:"van-cell-text"},[t._v(t._s(t.searchData.value))]),t._v(" "),e("span",[t._v("游玩")]),t._v(" "),e("span",[t._v(t._s(t.searchEnd.play))])])],2),t._v(" "),e("van-cell",{staticClass:"search-item",on:{click:function(a){t.cellClick("shareInn",t.searchData.value)}}},[e("template",{slot:"title"},[e("span",{staticClass:"van-cell-text"},[t._v(t._s(t.searchData.value))]),t._v(" "),e("span",[t._v("住宿")]),t._v(" "),e("span",[t._v(t._s(t.searchEnd.stay))])])],2),t._v(" "),e("van-cell",{staticClass:"search-item",on:{click:function(a){t.cellClick("shareFood",t.searchData.value)}}},[e("template",{slot:"title"},[e("span",{staticClass:"van-cell-text"},[t._v(t._s(t.searchData.value))]),t._v(" "),e("span",[t._v("美食")]),t._v(" "),e("span",[t._v(t._s(t.searchEnd.cate))])])],2),t._v(" "),e("van-cell",{staticClass:"search-item",on:{click:function(a){t.cellClick("rentList",t.searchData.value)}}},[e("template",{slot:"title"},[e("span",{staticClass:"van-cell-text"},[t._v(t._s(t.searchData.value))]),t._v(" "),e("span",[t._v("农房")]),t._v(" "),e("span",[t._v(t._s(t.searchEnd.farmhouse))])])],2),t._v(" "),e("van-cell",{staticClass:"search-item",on:{click:function(a){t.cellClick("wantedList",t.searchData.value)}}},[e("template",{slot:"title"},[e("span",{staticClass:"van-cell-text"},[t._v(t._s(t.searchData.value))]),t._v(" "),e("span",[t._v("求租")]),t._v(" "),e("span",[t._v(t._s(t.searchEnd.farmhouserenting))])])],2),t._v(" "),e("van-cell",{staticClass:"search-item",on:{click:function(a){t.cellClick("dealList",t.searchData.value)}}},[e("template",{slot:"title"},[e("span",{staticClass:"van-cell-text"},[t._v(t._s(t.searchData.value))]),t._v(" "),e("span",[t._v("成交")]),t._v(" "),e("span",[t._v(t._s(t.searchEnd.farmhouseturnover))])])],2),t._v(" "),e("van-cell",{staticClass:"search-item",on:{click:function(a){t.cellClick("infoList",t.searchData.value)}}},[e("template",{slot:"title"},[e("span",{staticClass:"van-cell-text"},[t._v(t._s(t.searchData.value))]),t._v(" "),e("span",[t._v("资讯")]),t._v(" "),e("span",[t._v(t._s(t.searchEnd.information))])])],2)],1)],1)])},staticRenderFns:[]};var i=e("VU/8")(s,c,!1,function(t){e("w5hQ")},"data-v-0e6abda6",null);a.default=i.exports},w5hQ:function(t,a){}});