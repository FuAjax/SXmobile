webpackJsonp([43],{"1X3+":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("9iUS"),s=e("Mitt"),n=e("754W"),r=e("7dTR"),c=e.n(r),l=e("XFU/"),o=e("6fE7"),d=e("fdCj"),v={name:"scenic",components:{stars:n.a,Header:s.a,Footer:i.a,Scroll:l.a,noFind:o.a,goTotop:d.a},data:function(){return{areatext:"区域",deliciousfood:"适合人群",fitseason:"适宜季节",nomessage:!1,defaultimg:c.a,area1:!1,area2:!1,area3:!1,area4:!1,fourSpan:[],isback:!0,title:"景点",scenic_list:[],list:["区域","适合人群","适宜季节","排序"],two:["区域"],num:-1,twoNum:0,items:[{text:"所有城市",children:[{text:"智能排序",id:1002,resful:"znd"},{text:"价格低到高",id:1003,resful:"jgs"},{text:"价格高到低",id:1004,resful:"jgj"},{text:"评论最高",id:1005,resful:"pjj"}]}],mainActiveIndex:0,activeId:null,loading:!1,finished:!1,page:1,rows:30,total:1,keywords:"",peopletype:[],landlist:[],weatherlist:[],item1:[],arearest:"",weatherrest:"",peoplerest:[],sortresful:""}},methods:{tosearch:function(){this.$router.push({path:"/search",query:{name:"景点",to:"scenic"}})},rank:function(){var t=this;this.$http.post("appServiceGrange/grangeIndex").then(function(a){"success"==a.msg&&(t.scenic_list=a.data.landspaceTopList,t.condition())})},init:function(){var t=this;setTimeout(function(){var a={page:t.page,rows:t.rows,rest:t.arearest+t.weatherrest+t.peoplerest+t.sortresful,keyword:t.keywords};t.$http.post("appServiceGrange/getLandspaceData",a).then(function(a){"success"==a.msg?(1==t.page?t.landlist=a.data.rows:t.landlist=t.landlist.concat(a.data.rows),0==t.landlist.length&&(t.nomessage=!0),t.total=a.data.total,t.page++,t.loading=!1,console.log(t.landlist.length,t.total),(t.landlist.length>=t.total||0==t.total)&&(t.finished=!0)):t.finished=!0}).catch(function(a){t.finished=!0})},500)},condition:function(){var t=this;this.$http.post("appServiceGrange/getLandSpaceParam").then(function(a){var e=a.data.AreaList;e.unshift({text:"不限",children:null,areaRestfulDictionary:""}),t.item1=e;var i=a.data.throngParam;i.map(function(t){t.children.unshift({menuRestfulDictionary:"",text:"不限",id:null})}),t.peopletype=i;var s=a.data.suitableSeasonParam;s.map(function(t){t.children.unshift({menuRestfulDictionary:"",text:"不限",id:null})}),t.weatherlist=s})},area:function(){this.area2=!1,this.area3=!1,this.area4=!1,this.area1=!this.area1},group:function(){this.area3=!1,this.area4=!1,this.area1=!1,this.area2=!this.area2},weather:function(){this.area4=!1,this.area1=!1,this.area2=!1,this.area3=!this.area3},sort:function(){this.area1=!1,this.area2=!1,this.area3=!1,this.area4=!this.area4},onNavClick:function(t){this.mainActiveIndex=t,this.area1=!1,this.arearest=this.item1[t].areaRestfulDictionary,this.areatext=this.item1[t].text,0==t&&(this.areatext="区域"),this.keywords="",this.nomessage=!1,this.page=1,this.init()},ontypeClick:function(t){"不限"===t.text?this.deliciousfood="适合人群":this.deliciousfood=t.text,this.activeId=t.id,this.area2=!1,this.peoplerest=t.menuRestfulDictionary,this.nomessage=!1,this.keywords="",this.page=1,this.init()},onweatherClick:function(t){"不限"===t.text?this.fitseason="适宜季节":this.fitseason=t.text,this.activeId=t.id,this.area3=!1,this.weatherrest=t.menuRestfulDictionary,this.nomessage=!1,this.keywords="",this.page=1,this.init()},onItemClick:function(t){this.activeId=t.id,this.area4=!1,this.sortresful=t.resful,this.nomessage=!1,this.keywords="",this.page=1,this.init()}},computed:{},created:function(){this.rank(),this.keywords=this.$route.query.searchWord},mounted:function(){},watch:{}},h={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"scenic",attrs:{id:"scenic"}},[e("div",{staticClass:"topBar"},[e("Header",{attrs:{title:t.title,isback:t.isback}})],1),t._v(" "),e("div",{staticStyle:{width:"100%",height:".92rem"}}),t._v(" "),e("div",{staticClass:"top"},[e("div",{staticClass:"wrap"},[e("div",{staticClass:"search",on:{click:t.tosearch}},[e("i",{staticClass:"iconfont icon-sousuo"}),t._v(" "),e("input",{attrs:{type:"text",placeholder:"请输入区域/景点名称"}})]),t._v(" "),e("router-link",{staticClass:"find",attrs:{to:{name:"mapFindGrange"},tag:"div"}},[t._v("\n        地图找农庄\n      ")])],1)]),t._v(" "),t.scenic_list.length>0?e("div",[e("div",{staticClass:"scenic"},[t._m(0),t._v(" "),e("div",{staticClass:"scenic_bottom",staticStyle:{overflow:"hidden"}},[e("scroll",{ref:"scroll",staticClass:"recommend-content",attrs:{data:t.scenic_list}},[e("div",{style:"width:"+3.2*t.scenic_list.length+"rem"},t._l(t.scenic_list,function(a,i){return e("router-link",{attrs:{to:{name:"scenicDetail",params:{id:a.lanspacePlaceNumber}}}},[e("div",{staticStyle:{width:"3rem",display:"inline-block","padding-right":".2rem"}},[a.fileUrl?e("div",{style:"background:url("+a.fileUrl+");width: 100%;height: 2rem;background-size:cover;background-position: center center"}):t._e(),t._v(" "),e("div",{staticClass:"van-ellipsis",staticStyle:{"font-size":"0.26rem"}},[t._v("\n                  "+t._s(a.lanspacePlaceName)+"\n                ")])])])}))])],1)])]):t._e(),t._v(" "),e("div",{staticClass:"separate"}),t._v(" "),e("div",{staticClass:"condition"},[e("ul",{staticClass:"top_tab clear"},[e("li",{staticClass:"list van-ellipsis",class:{active:t.area1},on:{click:t.area}},[t._v("\n        "+t._s(t.areatext)+"\n        "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.area1,expression:"area1"}],staticClass:"iconfont icon-xiala1"}),t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:!t.area1,expression:"!area1"}],staticClass:"iconfont icon-xiala"})]),t._v(" "),e("li",{staticClass:"list van-ellipsis",class:{active:t.area2},on:{click:t.group}},[t._v("\n        "+t._s(t.deliciousfood)+"\n        "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.area2,expression:"area2"}],staticClass:"iconfont icon-xiala1"}),t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:!t.area2,expression:"!area2"}],staticClass:"iconfont icon-xiala"})]),t._v(" "),e("li",{staticClass:"list van-ellipsis",class:{active:t.area3},on:{click:t.weather}},[t._v("\n       "+t._s(t.fitseason)+"\n        "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.area3,expression:"area3"}],staticClass:"iconfont icon-xiala1"}),t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:!t.area3,expression:"!area3"}],staticClass:"iconfont icon-xiala"})]),t._v(" "),e("li",{staticClass:"list van-ellipsis",class:{active:t.area4},on:{click:t.sort}},[t._v("\n        排序\n        "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.area4,expression:"area4"}],staticClass:"iconfont icon-xiala1"}),t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:!t.area4,expression:"!area4"}],staticClass:"iconfont icon-xiala"})])]),t._v(" "),e("div",[e("div",{staticClass:"area"},[t.area1?e("div",{staticClass:"regin"},[e("div",{staticClass:"left"},t._l(t.two,function(a,i){return e("div",{class:{active:i==t.twoNum},attrs:{keys:i}},[t._v(t._s(a)+"\n            ")])})),t._v(" "),e("div",{staticClass:"right"},[0==t.twoNum?e("div",[e("van-tree-select",{attrs:{items:t.item1,"main-active-index":t.mainActiveIndex,"active-id":t.activeId},on:{navclick:t.onNavClick}})],1):t._e()])]):t._e(),t._v(" "),t.area2?e("div",{staticClass:"group"},[e("van-tree-select",{attrs:{items:t.peopletype,"active-id":t.activeId},on:{itemclick:t.ontypeClick}})],1):t._e(),t._v(" "),t.area3?e("div",{staticClass:"season"},[e("van-tree-select",{attrs:{items:t.weatherlist,"active-id":t.activeId},on:{itemclick:t.onweatherClick}})],1):t._e(),t._v(" "),t.area4?e("div",{staticClass:"rank"},[e("van-tree-select",{attrs:{items:t.items,"active-id":t.activeId},on:{itemclick:t.onItemClick}})],1):t._e()])])]),t._v(" "),e("div",{staticClass:"list"},[e("div",{staticClass:"scenic_wrap"},[e("van-list",{attrs:{finished:t.finished},on:{load:t.init},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.landlist,function(a,i){return e("router-link",{attrs:{to:{name:"scenicDetail",params:{id:a.lanspacePlaceNumber}}}},[e("van-row",{attrs:{gutter:"20"}},[e("van-col",{attrs:{span:"8"}},[e("div",{staticClass:"left"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.fileUrl,expression:"item.fileUrl"}],attrs:{src:"undefine"!=a.fileUrl?a.fileUrl:t.defaultimg}})])]),t._v(" "),e("van-col",{attrs:{span:"16"}},[e("div",{staticClass:"right"},[e("div",{staticClass:"mulan van-ellipsis"},[e("span",{staticClass:"lake"},[t._v(t._s(a.lanspacePlaceName))]),t._v(" "),e("span",{staticClass:"five"},[t._v(t._s(a.lanspacePlaceGrade)+"级风景区")])]),t._v(" "),e("div",{staticClass:"grade"},[e("stars",{attrs:{rate:a.totalMark}}),t._v(" "),e("span",{staticClass:"score"},[t._v(t._s(a.totalMark)+"分")]),t._v(" "),e("p",{staticClass:"much"},[e("span",[t._v("￥"+t._s(a.admissionPrice))]),t._v("/人\n                ")])],1),t._v(" "),e("div",{staticClass:"position van-ellipsis"},[e("i",{staticClass:"iconfont icon-dizhi"}),t._v(t._s(a.fcityName)+"-"+t._s(a.fareaName)+"\n              ")]),t._v(" "),a.characteristics?e("div",{staticClass:"data"},t._l(a.characteristics.slice(0,3),function(a){return e("span",[t._v(t._s(a))])})):t._e()])])],1)],1)})),t._v(" "),t.nomessage?e("noFind",{attrs:{name1:"景点",name2:!1}}):t._e()],1)]),t._v(" "),e("div",[e("Footer"),t._v(" "),e("goTotop")],1)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"scenic_top clear"},[a("span",[this._v("景点")]),this._v("排行榜\n      ")])}]};var u=e("VU/8")(v,h,!1,function(t){e("AzZr"),e("5I3c")},"data-v-635053ac",null);a.default=u.exports},"5I3c":function(t,a){},AzZr:function(t,a){}});