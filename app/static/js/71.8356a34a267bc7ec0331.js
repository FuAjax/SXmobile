webpackJsonp([71],{dmzg:function(t,e){},obQ5:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("E4LH"),i={name:"telephone",data:function(){return{mobile:"",code:"",sendAuthCode:!0,auth_time:0,message:"",check:!1}},methods:{onClickLeft:function(){this.$router.go(-1)},blur:function(){this.check=Object(o.b)(this.mobile),this.check?this.message="":this.message="手机号格式不正确",""==this.mobile&&(this.message=""),console.log(this.check)},sendCode:function(){var t=this;if(this.check){this.sendAuthCode=!1,this.auth_time=120;var e=setInterval(function(){t.auth_time--,t.auth_time<=0&&(t.sendAuthCode=!0,clearInterval(e))},1e3);this.$http.post("appServiceSso/sendCode",{mobile:this.mobile}).then(function(e){"success"==e.msg?t.$toast("验证码发送成功"):t.$toast(e.info)}).catch(function(e){t.$toast("网络错误")})}},onClickRight:function(){this.$router.replace("/register")},login:function(){var t=this;""!=this.mobile?""!=this.code?this.check&&this.$http.post("appServiceSso/mobileLogin",{code:this.code,mobile:this.mobile}).then(function(e){"success"==e.msg?(t.$toast("登录成功"),localStorage.setItem("userInfo",JSON.stringify(e.data)),setTimeout(function(){3==t.$proType?t.$router.replace("/"):t.$router.replace("/navbar")},1200)):t.$toast(e.info)}).catch(function(e){t.$toast("网络错误")}):this.$toast("请输入验证码"):this.$toast("请输入手机号")}},computed:{},created:function(){localStorage.clear()},mounted:function(){}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"telephone"},[s("div",{staticClass:"navv"},[s("van-nav-bar",{attrs:{"right-text":"注册","left-arrow":""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight}})],1),t._v(" "),s("p",{staticClass:"account"},[t._v("手机验证码登录")]),t._v(" "),s("div",{staticClass:"formfield"},[s("van-cell-group",[s("van-field",{attrs:{"error-message":t.message,placeholder:"请输入手机号"},on:{input:t.blur},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1),t._v(" "),s("van-cell-group",[s("van-field",{attrs:{placeholder:"请输入手机验证码"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.sendAuthCode,expression:"sendAuthCode"}],staticClass:"code",attrs:{slot:"button"},on:{click:t.sendCode},slot:"button"},[t._v("\n          获取验证码\n        ")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.sendAuthCode,expression:"!sendAuthCode"}],staticClass:"recode",attrs:{slot:"button"},slot:"button"},[t._v(t._s(t.auth_time)+"秒后再发送")])])],1)],1),t._v(" "),s("div",{staticClass:"enter",on:{click:t.login}},[t._v("\n    登 录\n  ")]),t._v(" "),s("p",{staticClass:"two"},[s("router-link",{attrs:{to:"/login"}},[t._v("\n        账户密码登录\n    ")])],1)])},staticRenderFns:[]};var a=s("VU/8")(i,n,!1,function(t){s("dmzg")},"data-v-4a6e2634",null);e.default=a.exports}});