webpackJsonp([70],{"7Vvx":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={consultClick:function(){this.show=!0},typeClick:function(t){this.type=t.name,this.consultTypeId=t.id,this.restful=t.restful,this.show=!1},sexClick:function(t,e){this.changeRed=e,this.linksex=t.id},myphone:function(){this.phoneNumber==this.phoneNumber2?this.yanzhen=!1:this.yanzhen=!0},yanzhengma:function(){var t=this;if(""!=this.phoneNumber){var e=this.phoneNumber;this.sendAuthCode=!1,this.auth_time=120;var s=setInterval(function(){t.auth_time--,t.auth_time<=0&&(t.sendAuthCode=!0,clearInterval(s))},1e3);this.$http.post("appServiceSso/sendCode",{mobile:e}).then(function(e){"success"==e.msg?(t.$toast("短信验证码发送成功"),console.log(e.data)):t.$toast(e.info)}).catch(function(e){t.$toast("网络错误")}),console.log(this.phoneNumber)}else this.$toast("请输入手机号")},init:function(){var t=this;this.$http.post("/appServiceInformation/publishConsultParameter").then(function(e){var s=JSON.parse(localStorage.getItem("userInfo"));""==s||null==s?t.yanzhen=!0:JSON.parse(localStorage.getItem("userInfo")).userId&&(t.yanzhen=!1);e.data.mobile&&(t.yanzhen=!1,t.phoneNumber2=e.data.mobile,t.phoneNumber=e.data.mobile),t.consultType=e.data.consultType})},next:function(){var t=this.messageQuestion,e=this.messageTitle,s=this.consultTypeId,i=this.restful,n=this.type,a=this.userName,o=this.phoneNumber,l=this.linksex,c=JSON.parse(localStorage.getItem("userInfo"));if(""==c||null==c)this.yanzhen=!1;else{var r=JSON.parse(localStorage.getItem("userInfo")).userId;r&&(this.yanzhen=!0)}var u=this.card;this.$http.post("/appServiceInformation/publishConsult",{consultDescribe:t,consultTitle:e,consultTypeId:s,consultTypeRestful:i,consultTypeName:n,linkman:a,linkmobile:o,linksex:l,userID:r,verificationCode:u}).then(function(t){console.log(t)})}},n={name:"issueConsult",data:function(){return{title:"发布咨询",isback:!0,color:"#FF6400",messageTitle:"",messageQuestion:"",consultType:[],show:!1,list:!1,type:"请选择",sex:[{name:"女士",id:0},{name:"男士",id:1}],changeRed:0,phoneNumber:"",phoneNumber2:"",sendAuthCode:!0,auth_time:0,consultTypeId:"",restful:"",userName:"",card:"",linksex:"",consultTypeName:"",yanzhen:!1}},components:{Header:s("GgDs").a},created:function(){this.init()},methods:i},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"topBar"},[s("Header",{attrs:{title:t.title,color:t.color}})],1),t._v(" "),s("div",{staticClass:"content"},[s("van-cell-group",[s("van-field",{attrs:{label:"标题",type:"textarea",placeholder:"一句话描述您问题（必填）",rows:"1",autosize:{minHeight:120}},model:{value:t.messageTitle,callback:function(e){t.messageTitle=e},expression:"messageTitle"}})],1),t._v(" "),s("van-cell-group",[s("van-field",{attrs:{label:"问题描述",type:"textarea",placeholder:"一句话描述您问题（必填）",rows:"1",autosize:{minHeight:120}},model:{value:t.messageQuestion,callback:function(e){t.messageQuestion=e},expression:"messageQuestion"}})],1),t._v(" "),s("div",{staticClass:"person"},[s("div",{staticClass:"bot bot1"},[t._m(0),t._v(" "),s("div",{staticClass:"middle",staticStyle:{width:"30%"}},[s("p",{on:{click:t.consultClick}},[t._v("\n            "+t._s(t.type)+"\n          ")])]),t._v(" "),s("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},t._l(t.consultType,function(e,i){return s("div",{staticClass:"Type",on:{click:function(s){t.typeClick(e)}}},[t._v(t._s(e.name))])}))],1),t._v(" "),s("div",{staticClass:"bot bot1"},[t._m(1),t._v(" "),s("div",{staticClass:"middle",staticStyle:{width:"30%"}},[s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],staticStyle:{width:"88%"},attrs:{type:"text",placeholder:"请填写"},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"right"},t._l(t.sex,function(e,i){return s("div",{staticClass:"btn",class:{red:t.changeRed==i},on:{click:function(s){t.sexClick(e,i)}}},[t._v(t._s(e.name))])}))]),t._v(" "),s("div",{staticClass:"bot bot2"},[t._m(2),t._v(" "),s("div",{staticClass:"middle"},[s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNumber,expression:"phoneNumber"}],staticStyle:{width:"88%"},attrs:{type:"text",placeholder:"请填写"},domProps:{value:t.phoneNumber},on:{input:[function(e){e.target.composing||(t.phoneNumber=e.target.value)},t.myphone]}})])])]),t._v(" "),t.yanzhen?s("div",{staticClass:"bot bot3"},[t._m(3),t._v(" "),s("div",{staticClass:"middle"},[s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.card,expression:"card"}],staticStyle:{width:"88%"},attrs:{type:"text",placeholder:"请填写"},domProps:{value:t.card},on:{input:function(e){e.target.composing||(t.card=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"right",on:{click:t.yanzhengma}},[s("p",{directives:[{name:"show",rawName:"v-show",value:t.sendAuthCode,expression:"sendAuthCode"}]},[t._v("获取验证码")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.sendAuthCode,expression:"!sendAuthCode"}],staticClass:"recode",attrs:{slot:"button"},slot:"button"},[t._v(t._s(t.auth_time)+"秒后再发送")])])]):t._e()]),t._v(" "),s("div",{staticClass:"footer",on:{click:function(e){t.next()}}},[t._v("\n      立即发布\n    ")])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left"},[e("div",{staticClass:"iconfont icon-xingxing"}),this._v(" "),e("p",{staticStyle:{color:"#323237"}},[this._v("咨询类别\n          ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left"},[e("div",{staticClass:"iconfont icon-xingxing"}),this._v(" "),e("p",[this._v("联系人")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left"},[e("div",{staticClass:"iconfont icon-xingxing"}),this._v(" "),e("p",[this._v("联系电话")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left"},[e("div",{staticClass:"iconfont icon-xingxing"}),this._v(" "),e("p",[this._v("验证码")])])}]};var o=s("VU/8")(n,a,!1,function(t){s("U6IV")},"data-v-54c05d50",null);e.default=o.exports},U6IV:function(t,e){}});