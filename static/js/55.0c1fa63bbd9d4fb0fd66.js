webpackJsonp([55],{WBmK:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={name:"mapFindGrange",components:{star:e("754W").a},data:function(){return{name:"aa",autoheight:!1,landscape:[],playarray:[],innarray:[],foodarr:[],map:{},commonName:"",show:!1,longitude:null,latitude:null,actions:[{name:"高德地图"},{name:"百度地图"}]}},methods:{onSelect:function(t){"高德地图"==t.name?window.location.href="https://uri.amap.com/marker?position="+this.longitude+","+this.latitude+"&name="+this.commonName:"百度地图"==t.name&&(window.location.href="http://api.map.baidu.com/marker?location="+this.latitude+","+this.longitude+"&title="+this.commonName+"&content=我的位置&output=html&src=yourComponyName|yourAppName"),this.show=!1,console.log(this.longitude,this.latitude)},onCancel:function(){this.show=!1},showmap:function(t,a,e){this.longitude=t,this.latitude=a,this.commonName=e,this.show=!0},goback:function(){this.$router.go(-1)},onClick:function(t){0==t?(this.map.clearOverlays(),this.setmap(this.landscape,1)):1==t?(this.map.clearOverlays(),this.setmap(this.playarray,2)):2==t?(this.map.clearOverlays(),this.setmap(this.innarray,3)):3==t&&(this.map.clearOverlays(),this.setmap(this.foodarr,4))},topDown:function(){this.autoheight=!this.autoheight},setmap:function(t,a){var e=this,s=this;function i(t,a,e,s){this._point=t,this._text=a,this._id=e,this._index=s}this.map=new BMap.Map("allmap"),this.map.centerAndZoom("武汉",9),i.prototype=new BMap.Overlay,i.prototype.initialize=function(t){this._map=t;var a=this._div=document.createElement("div");a.className="overlay",a.style.position="absolute",a.style.zIndex=BMap.Overlay.getZIndex(this._point.lat),a.style.padding="2px",a.style.MozUserSelect="none",a.style.fontSize="12px";var e=this._arrow=document.createElement("div");e.className="map-arrow",e.style.position="absolute",e.style.width="0px",e.style.height="0px",e.style.top="42px",e.style.left="18px",e.style.border="10px transparent solid",e.style.borderTopColor="#ff9900",a.appendChild(e);var s=this._a=document.createElement("a");return s.className="map-content",s.style.backgroundColor="#ff9900",s.style.borderRadius="5px",s.style.padding="5px",s.style.color="white",s.style.textDecoration="none",s.style.height="30px",s.style.whiteSpace="nowrap",s.style.display="inline-block",a.appendChild(s),s.appendChild(document.createTextNode(this._text)),t.getPanes().labelPane.appendChild(a),a},i.prototype.draw=function(){var t=this._map.pointToOverlayPixel(this._point);this._div.style.left=t.x-parseInt(this._arrow.style.left)+"px",this._div.style.top=t.y-30+"px"},void 0==t?this.landscape.forEach(function(t,a){var s=new i(new BMap.Point(t.longitude,t.latitude),t.lanspacePlaceName,t.lanspacePlaceNumber,a);e.map.addOverlay(s)}):t.forEach(function(t,a){var s=new i(new BMap.Point(t.longitude,t.latitude),t.lanspacePlaceName||t.grangeName,t.lanspacePlaceNumber,a);e.map.addOverlay(s)}),this.map.addEventListener("touchmove",function(t){s.map.enableDragging()}),this.map.addEventListener("touchend",function(t){s.map.disableDragging()}),this.map.disableDragging(),this.map.enableScrollWheelZoom(!0),this.search(a)},init:function(){var t=this;this.$http.post("appServiceGrange/grangeIndexData").then(function(a){"success"==a.msg?(t.landscape=a.data.landspace.rows,t.playarray=a.data.playList.rows,t.innarray=a.data.stayList.rows,t.foodarr=a.data.foodsList.rows,t.setmap()):t.$toast(a.info)})},search:function(t){var a=this;if(void 0==t||1==t){var e=document.getElementsByClassName("overlay");this.landscape.forEach(function(t,s){e.item(s).addEventListener("click",function(){a.$el.querySelectorAll(".specialLand").forEach(function(t){t.style.background="white"});var t=a.$el.querySelector("#id"+s).offsetTop;a.$el.querySelector("#id"+s).style.background="rgba(192,192,192,.2)";var e=t/50,i=document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset;!function a(){i<t?(i+=e,document.body.scrollTop=i,document.documentElement.scrollTop=i,setTimeout(a,10)):(document.body.scrollTop=t,document.documentElement.scrollTop=t)}()})})}if(2==t){var s=document.getElementsByClassName("overlay");this.playarray.forEach(function(t,e){s.item(e).addEventListener("click",function(){a.$el.querySelectorAll(".specialPlay").forEach(function(t){t.style.background="white"});var t=a.$el.querySelector("#play"+e).offsetTop;a.$el.querySelector("#play"+e).style.background="rgba(192,192,192,.2)";var s=t/50,i=document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset;!function a(){i<t?(i+=s,document.body.scrollTop=i,document.documentElement.scrollTop=i,setTimeout(a,10)):(document.body.scrollTop=t,document.documentElement.scrollTop=t)}()})})}if(3==t){var i=document.getElementsByClassName("overlay");this.innarray.forEach(function(t,e){i.item(e).addEventListener("click",function(){a.$el.querySelectorAll(".specialInn").forEach(function(t){t.style.background="white"});var t=a.$el.querySelector("#inn"+e).offsetTop;a.$el.querySelector("#inn"+e).style.background="rgba(192,192,192,.2)";var s=t/50,i=document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset;!function a(){i<t?(i+=s,document.body.scrollTop=i,document.documentElement.scrollTop=i,setTimeout(a,10)):(document.body.scrollTop=t,document.documentElement.scrollTop=t)}()})})}if(4==t){var n=document.getElementsByClassName("overlay");this.foodarr.forEach(function(t,e){n.item(e).addEventListener("click",function(){a.$el.querySelectorAll(".specialFood").forEach(function(t){t.style.background="white"});var t=a.$el.querySelector("#food"+e).offsetTop;a.$el.querySelector("#food"+e).style.background="rgba(192,192,192,.2)";var s=t/50,i=document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset;!function a(){i<t?(i+=s,document.body.scrollTop=i,document.documentElement.scrollTop=i,setTimeout(a,10)):(document.body.scrollTop=t,document.documentElement.scrollTop=t)}()})})}}},computed:{},created:function(){this.init()},mounted:function(){}},i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mapFindGrange"},[e("div",{staticClass:"mapwrap"},[e("div",{style:{height:t.autoheight?"8.13rem":"6rem"},attrs:{id:"allmap"}}),t._v(" "),e("span",{staticClass:"back",on:{click:t.goback}},[e("i",{staticClass:"iconfont icon-xiangzuo"})])]),t._v(" "),e("div",{staticClass:"center",on:{click:t.topDown}},[e("i",{staticClass:"iconfont icon-xiala1",style:{display:t.autoheight?"none":"inline-block"}}),t._v(" "),e("i",{staticClass:"iconfont icon-xiala",style:{display:t.autoheight?"inline-block":"none"}})]),t._v(" "),e("div",{staticClass:"tab"},[e("van-tabs",{on:{click:t.onClick}},[e("van-tab",{attrs:{title:"景点"}},[e("div",{staticClass:"scenic_wrap"},[t._l(t.landscape,function(a,s){return e("router-link",{attrs:{to:{name:"scenicDetail",params:{id:a.lanspacePlaceNumber}}}},[e("van-row",{staticClass:"specialLand",attrs:{gutter:"20",id:"id"+s}},[e("van-col",{attrs:{span:"8"}},[e("div",{staticClass:"left"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.fileUrl,expression:"item.fileUrl"}],attrs:{src:a.fileUrl}})])]),t._v(" "),e("van-col",{attrs:{span:"16"}},[e("div",{staticClass:"right"},[e("div",{staticClass:"mulan van-ellipsis"},[e("span",{staticClass:"lake"},[t._v(t._s(a.lanspacePlaceName))]),t._v(" "),e("span",{staticClass:"five"},[t._v(t._s(a.lanspacePlaceGrade)+"级风景区")])]),t._v(" "),e("div",{staticClass:"grade"},[e("star",{attrs:{rate:a.totalMark}}),t._v(" "),e("span",{staticClass:"score"},[t._v(t._s(a.totalMark)+"分")]),t._v(" "),e("p",{staticClass:"much"},[e("span",[t._v("￥"+t._s(a.admissionPrice))]),t._v("/人\n                    ")])],1),t._v(" "),e("div",{staticClass:"position van-ellipsis"},[e("i",{staticClass:"iconfont icon-dizhi"}),t._v(t._s(a.fcityName)+"-"+t._s(a.fareaName)+"\n                  ")]),t._v(" "),a.characteristics?e("div",{staticClass:"data clear"},[t._l(a.characteristics.slice(0,3),function(a){return e("span",[t._v(t._s(a)+"\n                    ")])}),t._v(" "),e("p",{on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.showmap(a.longitude,a.latitude,a.lanspacePlaceName)}}},[e("i",{staticClass:"iconfont icon-ditu"}),t._v(" 导航\n                    ")])],2):t._e()])])],1)],1)}),t._v(" "),e("router-link",{staticClass:"more",attrs:{tag:"p",to:{name:"scenic"}}},[t._v("更多景点")])],2)]),t._v(" "),e("van-tab",{attrs:{title:"游玩"}},[e("div",{staticClass:"scenic_wrap"},[t._l(t.playarray,function(a,s){return e("router-link",{attrs:{to:{name:"grangedetail",params:{id:a.grangeNumber}}}},[e("van-row",{staticClass:"specialPlay",attrs:{gutter:"20",id:"play"+s}},[e("van-col",{attrs:{span:"8"}},[e("div",{staticClass:"left"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.fileUrl,expression:"item.fileUrl"}],attrs:{src:a.fileUrl}})])]),t._v(" "),e("van-col",{attrs:{span:"16"}},[e("div",{staticClass:"right"},[e("div",{staticClass:"mulan van-ellipsis"},[e("span",{staticClass:"lake"},[t._v(t._s(a.grangeName))])]),t._v(" "),e("div",{staticClass:"grade"},[e("star",{attrs:{rate:a.totalMark}}),t._v(" "),e("span",{staticClass:"score"},[t._v(t._s(a.totalMark)+"分")]),t._v(" "),e("p",{staticClass:"much"},[e("span",[t._v("￥"+t._s(a.personConsumption))]),t._v("/人\n                    ")])],1),t._v(" "),e("div",{staticClass:"position van-ellipsis"},[e("i",{staticClass:"iconfont icon-dizhi"}),t._v(t._s(a.fcityName)+"-"+t._s(a.fareaName)+"-"+t._s(a.fstreetName)+"\n                  ")]),t._v(" "),a.facilities?e("div",{staticClass:"data"},[t._l(a.facilities.slice(0,3),function(a){return e("span",[t._v(t._s(a))])}),t._v(" "),e("p",{on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.showmap(a.longitude,a.latitude,a.grangeName)}}},[e("i",{staticClass:"iconfont icon-ditu"}),t._v(" 导航\n                    ")])],2):t._e()])])],1)],1)}),t._v(" "),e("router-link",{staticClass:"more",attrs:{tag:"p",to:{name:"sharePlay"}}},[t._v("更多玩乐")])],2)]),t._v(" "),e("van-tab",{attrs:{title:"住宿"}},[e("div",{staticClass:"scenic_wrap"},[t._l(t.innarray,function(a,s){return e("router-link",{attrs:{to:{name:"grangedetail",params:{id:a.grangeNumber}}}},[e("van-row",{staticClass:"specialInn",attrs:{gutter:"20",id:"inn"+s}},[e("van-col",{attrs:{span:"8"}},[e("div",{staticClass:"left"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.fileUrl,expression:"item.fileUrl"}],attrs:{src:a.fileUrl}})])]),t._v(" "),e("van-col",{attrs:{span:"16"}},[e("div",{staticClass:"right"},[e("div",{staticClass:"mulan van-ellipsis"},[e("span",{staticClass:"lake"},[t._v(t._s(a.grangeName))])]),t._v(" "),e("div",{staticClass:"grade"},[e("star",{attrs:{rate:a.totalMark}}),t._v(" "),e("span",{staticClass:"score"},[t._v(t._s(a.totalMark)+"分")]),t._v(" "),e("p",{staticClass:"much"},[e("span",[t._v("￥"+t._s(a.personConsumption))]),t._v("/人\n                    ")])],1),t._v(" "),e("div",{staticClass:"position van-ellipsis"},[e("i",{staticClass:"iconfont icon-dizhi"}),t._v(t._s(a.fcityName)+"-"+t._s(a.fareaName)+"-"+t._s(a.fstreetName)+"\n                  ")]),t._v(" "),a.facilities?e("div",{staticClass:"data"},[t._l(a.facilities.slice(0,3),function(a){return e("span",[t._v(t._s(a))])}),t._v(" "),e("p",{on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.showmap(a.longitude,a.latitude,a.grangeName)}}},[e("i",{staticClass:"iconfont icon-ditu"}),t._v(" 导航\n                    ")])],2):t._e()])])],1)],1)}),t._v(" "),e("router-link",{staticClass:"more",attrs:{tag:"p",to:{name:"shareInn"}}},[t._v("更多住宿")])],2)]),t._v(" "),e("van-tab",{attrs:{title:"美食"}},[e("div",{staticClass:"scenic_wrap"},[t._l(t.foodarr,function(a,s){return e("router-link",{attrs:{to:{name:"grangedetail",params:{id:a.grangeNumber}}}},[e("van-row",{staticClass:"specialFood",attrs:{gutter:"20",id:"food"+s}},[e("van-col",{attrs:{span:"8"}},[e("div",{staticClass:"left"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.fileUrl,expression:"item.fileUrl"}],attrs:{src:a.fileUrl}})])]),t._v(" "),e("van-col",{attrs:{span:"16"}},[e("div",{staticClass:"right"},[e("div",{staticClass:"mulan van-ellipsis"},[e("span",{staticClass:"lake"},[t._v(t._s(a.grangeName))])]),t._v(" "),e("div",{staticClass:"grade"},[e("star",{attrs:{rate:a.totalMark}}),t._v(" "),e("span",{staticClass:"score"},[t._v(t._s(a.totalMark)+"分")]),t._v(" "),e("p",{staticClass:"much"},[e("span",[t._v("￥"+t._s(a.personConsumption))]),t._v("/人\n                    ")])],1),t._v(" "),e("div",{staticClass:"position van-ellipsis"},[t._v("\n                    "+t._s(a.fcityName)+"-"+t._s(a.fareaName)+"-"+t._s(a.fstreetName)+"\n                  ")]),t._v(" "),e("div",{staticClass:"variety van-ellipsis"},[t._v("\n                    "+t._s(a.specialCuisine?a.specialCuisine.substring(0,18):null)+"\n                    "),e("p",{on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.showmap(a.longitude,a.latitude,a.grangeName)}}},[e("i",{staticClass:"iconfont icon-ditu"}),t._v(" 导航\n                    ")])])])])],1)],1)}),t._v(" "),e("router-link",{staticClass:"more",attrs:{tag:"p",to:{name:"shareFood"}}},[t._v("更多美食")])],2)])],1)],1),t._v(" "),e("van-actionsheet",{attrs:{actions:t.actions,"cancel-text":"取消"},on:{select:t.onSelect,cancel:t.onCancel},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}})],1)},staticRenderFns:[]};var n=e("VU/8")(s,i,!1,function(t){e("s+m0")},"data-v-dc4d0054",null);a.default=n.exports},"s+m0":function(t,a){}});